<!DOCTYPE html>
<html>
<head>
    <script>

        Global = {
            mainWindow: undefined,
            target: undefined,
        };

        UtopiaApi = {
            placeBlock: function (type, x, y, z) {
                Global.mainWindow.postMessage({
                    type: 'request',
                    body: {
                        method: 'placeBlock',
                        params: [type, x, y, z]
                    }
                }, Global.target);
            },
        };
        Inputs = {}

        function end() {
            Global.mainWindow.postMessage({
                type: 'end'
            }, Global.target);
        }

        window.addEventListener('message', function (e) {
            let mainWindow = e.source;
            Global.mainWindow = mainWindow;
            Global.target = e.origin;
            Inputs = e.data.inputs;
            try {
                eval(e.data.code);
                end();
            } catch (e) {
                mainWindow.postMessage(e.message, e.origin);
            }
        });
    </script>
</head>
<body>
</body>
</html>
